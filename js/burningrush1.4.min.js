function e(){console.log("game paused")}var t,i,s,a,n,h,o,d,l,r,c,y,u,m,p,g,x,B,w,b,f,S,P,v,M,V,k,E,C,A,G=3,T=3,D=0,F=0,H=1,O=!0,R=!1,L=1,K=!1,I=!1,X=!0,z=!0,U=!1,q=(new Phaser.Math.Vector2,200),N={mute:!1,volume:.5,rate:1,loop:!1,delay:0},Y={mute:!1,volume:.25,rate:1,loop:!0,delay:0};window.onload=function(){t={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,width:480,height:640,min:{width:480,height:640},max:{width:960,height:1280}},parent:"gameBoard",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[Be,we,pe,ge,xe,be,fe]},new Phaser.Game(t),window.focus()};class _ extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class W extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,e.key),e.scene.add.existing(this),this.Health=8300,this.canHit=!0,this.isBoss=!0}}class Z extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,e.key),e.scene.add.existing(this),this.Health=10900,this.canHit=!0,this.isBoss=!0}}class j extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"bossThree"),e.scene.add.existing(this),this.Health=12e3,this.canHit=!0,this.isBoss=!0}}class J extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,e.key,e.speed,e.ofstX),e.scene.add.existing(this),this.Health=10,this.canHit=!0}}class Q extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,e.type,e.health,e.weapon,e.fdelay,e.stringDir,e.strLength,e.destX,e.destY),e.scene.add.existing(this),this.canHit=!0,this.inPos=!1,this.Health=e.health,this.isBoss=!1,this.Shooter=e.scene.time.addEvent({delay:e.fdelay,callback:function(){1==this.active?("blue"==e.weapon?e.scene.blueShot(this.x,this.y):"red"==e.weapon?e.scene.redShot(this.x,this.y):"aimedBlue"==e.weapon?e.scene.aimedShot(this.x,this.y):"aimedRed"==e.weapon?e.scene.aimedShotRed(this.x,this.y):"directionalShotBlue"==e.weapon?e.scene.directionalShotBlue(this.x,this.y,e.stringDir):"stringBlue"==e.weapon?e.scene.bulletString(e.strLength,e.stringDir,this.x,this.y):"arrowString"==e.weapon?e.scene.arrowString(e.strLength,e.stringDir,this.x,this.y):"quadShot"==e.weapon?e.scene.quadShot(this.x,this.y):"quadShot2"==e.weapon?e.scene.quadShot2(this.x,this.y):"tripleShot"==e.weapon?e.scene.tripleShot(this.x,this.y):"octoShot"==e.weapon?e.scene.octoShot(this.x,this.y):"largeBlueShot"==e.weapon?e.scene.largeBlueShot(this.x,this.y,e.stringDir):"boss1patt1"==e.weapon?(e.scene.quadShot(this.x,this.y),e.scene.aimedShotRed(this.x,this.y)):"boss1patt2"==e.weapon?(e.scene.directionalShotBlue(this.x-21,this.y+10,Phaser.Math.Between(-100,100),60),e.scene.directionalShotBlue(this.x+2,this.y+9,Phaser.Math.Between(-100,100),-60),e.scene.directionalShotBlue(this.x-1,this.y+24,Phaser.Math.Between(-100,100),60),e.scene.directionalShotBlue(this.x+24,this.y+20,Phaser.Math.Between(-100,100),-60),e.scene.directionalShotBlue(this.x-20,this.y+25,60,-9),e.scene.directionalShotBlue(this.x-13,this.y-16,Phaser.Math.Between(-100,100),-60),e.scene.directionalShotBlue(this.x+10,this.y-17,Phaser.Math.Between(-100,100),60),e.scene.directionalShotBlue(this.x-5,this.y-13,Phaser.Math.Between(-100,100),-60),e.scene.directionalShotBlue(this.x+21,this.y-10,Phaser.Math.Between(-100,100),60),e.scene.directionalShotBlue(this.x+6,this.y-4,60,10),e.scene.directionalShotBlue(this.x+5,this.y-2,60,0),e.scene.directionalShotBlue(this.x-9,this.y-11,Phaser.Math.Between(-100,100),-60),e.scene.directionalShotBlue(this.x-21,this.y-24,Phaser.Math.Between(-100,100),60),e.scene.directionalShotBlue(this.x-14,this.y+2,-60,0),e.scene.directionalShotBlue(this.x+6,this.y+9,Phaser.Math.Between(-100,100),60)):"custerA"==e.weapon?e.scene.clusterA(this.x,this.y):"clusterB"==e.weapon?e.scene.clusterB(this.x,this.y):e.scene.blueShot(this.x,this.y),0==this.inPos&&e.scene.moveEnemy(this,e.destX,e.destY)):this.Shooter.destroy()},callbackScope:this,loop:!0}),e.scene.events.on("update",(()=>{1==this.active&&1==e.scene.bombing&&e.scene.cameras.main.worldView.contains(this.x,this.y)&&(e.scene.spawnCoin(this.x,this.y),e.scene.explode(this.x,this.y,5),this.setActive(!1),this.setVisible(!1),this.destroy())}))}}class $ extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class ee extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"redBullet"),e.scene.add.existing(this),e.scene.events.on("update",(()=>{e.scene.cameras.main.worldView.contains(this.x,this.y)||this.destroy()}))}}class te extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class ie extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"blueBullet"),e.scene.add.existing(this),e.scene.events.on("update",(()=>{e.scene.cameras.main.worldView.contains(this.x,this.y)?1==e.scene.bombing&&this.destroy():this.destroy()}))}}class se extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,e.key),e.scene.add.existing(this),e.scene.events.on("update",(()=>{e.scene.cameras.main.worldView.contains(this.x,this.y)?1==e.scene.bombing&&this.destroy():this.destroy()}))}}class ae extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.createMultiple({classType:ne,frameQuantity:40,active:!1,visible:!1,key:"laser"})}fireLaser(e,t){const i=this.getFirstDead(!1);i&&i.fire(e,t)}}class ne extends Phaser.Physics.Arcade.Sprite{constructor(e,t,i){super(e,t,i,"laser")}fire(e,t){this.body.reset(e,t),this.setActive(!0),this.setVisible(!0),this.setVelocityY(-1200)}preUpdate(e,t){super.preUpdate(e,t),this.y<=0&&(this.setActive(!1),this.setVisible(!1)),this.setVelocityY(-1200)}}class he extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"lzrCannon"),e.scene.add.existing(this)}}class oe extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class de extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"lazerBeam"),e.scene.add.existing(this)}}class le extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class re extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"coin"),e.scene.add.existing(this),e.scene.events.on("update",(()=>{e.scene.input.activePointer.isDown||e.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z).isDown?(this.setVelocity(0,0),this.setGravity(0,10)):e.scene.physics.moveToObject(this,i,150)}))}}class ce extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class ye extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"mCoin"),e.scene.add.existing(this),e.scene.events.on("update",(()=>{e.scene.input.activePointer.isDown||e.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z).isDown?(this.setVelocity(0,0),this.setGravity(0,10)):e.scene.physics.moveToObject(this,i,150)}))}}class ue extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"pCoin"),e.scene.add.existing(this)}}class me extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e)}}class pe extends Phaser.Scene{constructor(){super("PlayGame"),this.laserGroup}preload(){}passStage(){var e;let t;O?e=1e5:O||(e=0);let i=this.add.sprite(0,0,"stageComplete");i.setDepth(0),i.setOrigin(0,0);this.add.text(.2*this.scale.width,.25*this.scale.height,"Kills: "+u+" x1000 = "+1e3*u,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1}),this.add.text(.2*this.scale.width,.25*this.scale.height+35,"Coins: "+m+" x1000 = "+1e3*m,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1}),this.add.text(.2*this.scale.width,.25*this.scale.height+70,"No miss: "+e,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1});t=1e3*m+1e3*u+e,D+=t,this.time.delayedCall(4e3,(function(){this.cameras.main.fadeOut(1e3,0,0,0)}),[],this),this.time.delayedCall(5e3,(function(){this.scene.start("PlayGame2"),this.bossMusic.stop()}),[],this)}pauseGame(){e(),U?U&&this.continueGame():(w.play(N),this.scene.pause("PlayGame"),this.scene.launch("PauseButton"),console.log("Game paused."),s.setActive(!1),s.setVisible(!1),a.setActive(!0),a.setVisible(!0))}scorePoints(e,t,i){var s;D+=s=e*H;let a=this.add.text(t,i,"+"+s,{fontFamily:"pxlFont",fontSize:"16px",fill:"#fff",stroke:"#000",strokeThickness:1});this.time.delayedCall(1e3,(function(){a.destroy()}),[],this)}collectCoin(e,t){t.disableBody(!0,!0),m+=1,this.scorePoints(10,t.x,t.y),x.play(N)}collectMiniCoin(e,t){t.disableBody(!0,!0);let i=this.add.text(t.x,t.y-10,"MULTI + 1",{fontFamily:"pxlFont",fontSize:"12px",fill:"#A7DBD8",stroke:"#000",strokeThickness:1});this.scorePoints(5,t.x,t.y+15),H+=1,this.time.delayedCall(1e3,(function(){i.destroy()}),[],this),this.addTimer(),x.play(N)}powerUpPlayer(e,t){t.disableBody(!0,!0),g.play(N),1==L?(console.log("power up collected, power level: "+L),f=new he({scene:this,x:e.x-15,y:e.y+15}),L+=1,this.scorePoints(100,e.x,e.y+10)):2==L&&(console.log("power up collected, power level: "+L),S=new he({scene:this,x:e.x+15,y:e.y+15}),L+=1,this.scorePoints(1e3,e.x,e.y+5),K&&(v=new de({scene:this,x:S.x,y:S.y-10}),this.beams.add(v),v.setOrigin(0,1),v.play("greenAnim")))}explode(e,t,i){for(let s=0;s<i;s++)this.time.delayedCall(200*s,(function(){this.add.sprite(Phaser.Math.Between(e-10,e+10),Phaser.Math.Between(t-10,t+10),"expl1").play("explosion"),B.play(N)}),[],this)}getBombed(e,t){e.Health=e.Health-100,this.damageEnemy(e,t)}damageEnemy(e,t){if(this.cameras.main.worldView.contains(e.x,e.y)&&1==e.canHit&&(e.canHit=!1,e.setTintFill(268435455),e.Health=e.Health-(10+L+3*L),console.log("enemy hit, health:"+e.Health),this.time.delayedCall(100,(function(){e.clearTint(),e.canHit=!0}),[],this),e.Health<=0))if(e.isBoss){if(e.isBoss){console.log("boss destroyed"),I=!1,u+=1;for(let t=0;t<12;t++)this.time.delayedCall(200*t,(function(){B.play(N),this.add.sprite(Phaser.Math.Between(e.x-50,e.x+50),Phaser.Math.Between(e.y+60,e.y-60),"expl1").play("explosion")}),[],this),this.spawnCoin(Phaser.Math.Between(e.x-100,e.x+100),Phaser.Math.Between(e.y+200,e.y-50));e.destroy(),this.time.delayedCall(6e3,this.passStage,[],this)}}else{u+=1,this.scorePoints(50,e.x,e.y+5),this.explode(e.x,e.y,2);let t=Phaser.Math.Between(0,10);5==t?this.spawnPowerUp(e.x,e.y):t>5?this.spawnCoin(e.x,e.y):t<5&&this.spawnMiniCoin(e.x,e.y),e.setActive(!1),e.setVisible(!1),e.destroy()}}killRedBullet(e,t){console.log("red bullet hit"),e.disableBody(!0,!0),t.setActive(!1),t.setVisible(!1),this.scorePoints(1,e.x,e.y)}respawnPlayer(){sdk.showBanner(),i.setVisible(!0),i.setAlpha(.5),z=!1,this.time.delayedCall(2500,(function(){i.body.enable=!0,z=!0,i.setAlpha(1)}),[],this),X=!0,T=3}continueGame(){w.play(N),this.physics.world.timeScale=1,this.respawnPlayer(),G=3,D=0,T=3,this.addLives(),this.addBombs(),U=!1,h.setActive(!1),h.setVisible(!1),o.setActive(!1),o.setVisible(!1),A.setVisible(!1),s.setActive(!0),s.setVisible(!0)}toTitle(){this.scene.stop("PlayGame"),this.scene.start("BootGame")}addLives(){l=this.add.group({key:"playerIcon",repeat:1,setXY:{x:16,y:616,stepX:32}})}addBombs(){c=this.add.group({key:"bombIcon",repeat:2,setXY:{x:390,y:616,stepX:32}})}playerHit(e,t){z&&(console.log("Player hit"),O=!1,this.damageEnemy(t,this.laserGroup),X=!1,z=!1,this.explode(e.x,e.y,4),e.setVisible(!1),e.setActive(!1),e.body.enable=!1,G-=1,l.remove(l.getLast(!0),!0),0===G?this.initiateGameOver():this.time.delayedCall(2e3,this.respawnPlayer,[],this))}addTimer(){R=!0,this.time.addEvent({delay:3e4,callback:function(){R=!1},loop:!1})}startBossBattle(){let e=this.add.sprite(0,0,"warning");e.setOrigin(0,0),e.setAlpha(0),b.play({mute:!1,volume:.5,loop:!0,delay:0});this.tweens.add({targets:e,alphaTopLeft:{value:1,duration:500,ease:"Power1"},alphaBottomRight:{value:1,duration:500,ease:"Power1"},alphaBottomLeft:{value:1,duration:500,ease:"Power1"},yoyo:!0,loop:-1});this.tweens.add({targets:this.stageMusic,volume:0,duration:2e3}),this.time.delayedCall(4e3,(function(){e.destroy(),b.stop(),this.bossMusic.play(Y),this.addBoss(240,10)}),[],this)}create(){this.cameras.main.fadeIn(1e3,0,0,0),(d=this.add.tileSprite(0,0,this.scale.width,this.scale.height,"stageOneBG")).setOrigin(0,0),this.stageMusic=this.sound.add("stageOneSong"),this.bossMusic=this.sound.add("bossBattleSong"),this.stageMusic.play(Y),this.anims.create({key:"animPlayer",frames:this.anims.generateFrameNumbers("animatedPlayer",{start:0,end:3}),frameRate:10,repeat:-1}),(i=this.physics.add.sprite(240,400,"mech")).play("animPlayer"),i.setBounce(1),i.setGravity(0),i.setCollideWorldBounds(!0),i.setSize(1,1),i.setOffset(23,23),y=this.input.keyboard.createCursorKeys();this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);this.laserGroup=new ae(this),this.beams=new oe(this),O=!0,u=0,m=0,(E=this.add.text(5,5,"000000000",{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:3})).setScrollFactor(0),(C=this.add.text(5,25,"x001",{fontFamily:"pxlFont",fontSize:"32px",fill:"#A7DBD8",stroke:"#000",strokeThickness:3})).setScrollFactor(0),this.addBombs();V=new te(this),k=new $(this),this.addLives(),this.coins=new le(this),this.spawnCoin(12,450),this.powerUps=new me(this),this.miniCoins=new ce(this),this.anims.create({key:"bossOneA",frames:this.anims.generateFrameNumbers("bossOneAnim",{start:0,end:3}),frameRate:5,repeat:-1}),this.nmeGroup=new _(this),this.time.delayedCall(86666,(function(){this.startBossBattle()}),[],this),this.addBugEnemy(192,-102,"baxter",50,"blue",193,72,500),this.addBugEnemy(372,-266,"baxter",50,"red",372,236,500),this.addMiniBug(83,-303,200,0),this.addMiniBug(83,-333,200,0),this.addBugEnemy(83,-473,"baxter",50,"stringBlue",83,473,1e3,30,8),this.addMiniBug(243,-522,300,0),this.addMiniBug(309,-543,300,0),this.addMiniBug(224,-570,300,0),this.addMiniBug(259,-571,300,0),this.addMiniBug(307,-571,300,0),this.addMiniBug(430,-585,300,0),this.addBugEnemy(430,-585,"baxter",50,"red",430,173,250),this.addMiniBug(290,-603,300,0),this.addMiniBug(191,-619,300,0),this.addMiniBug(163,-670,300,0),this.addMiniBug(324,-669,300,0),this.addBugEnemy(45,-656,"tomato",50,"quadShot",45,330,600),this.addBugEnemy(402,-739,"tomato",50,"aimedShotRed",402,490,400),this.addMiniBug(227,-764,300,0),this.addMiniBug(194,-797,300,0),this.addMiniBug(162,-846,300,0),this.addMiniBug(129,-894,300,0),this.addMiniBug(100,-925,300,0),this.addMiniBug(66,-957,300,0),this.addMiniBug(67,-988,300,0),this.addMiniBug(18,-1037,300,0),this.addMiniBug(306,-828,300,0),this.addMiniBug(328,-864,300,0),this.addMiniBug(403,-957,300,0),this.addMiniBug(451,-989,300,0),this.addMiniBug(451,-1037,300,0),this.addBugEnemy(223,-915,"baxter",50,"quadShot",263,167,500),this.addBugEnemy(353,-1089,"tomato",50,"octoShot",353,240,500),this.addBugEnemy(63,-1191,"baxter",50,"stringBlue",63,63,800,20,5),this.addBugEnemy(416,-1287,"baxter",50,"stringBlue",418,63,800,-20,5),this.addBugEnemy(165,-1378,"fish",50,"octoShot",165,200,800),this.addBugEnemy(97,-1560,"baxter",50,"aimedRed",97,102,500),this.addBugEnemy(272,-1711,"fish",50,"aimedBlue",272,461,500),this.addBugEnemy(465,-1727,"fish",50,"aimedRed",265,209,200),this.addBugEnemy(146,-1792,"fish",50,"aimedRed",346,111,500),this.addBugEnemy(68,-1843,"fish",50,"aimedBlue",168,211,200),this.addBugEnemy(344,-1870,"fish",50,"stringBlue",144,160,100,-34,7),this.addMiniBug(434,-1837,300,0),this.addMiniBug(402,-1902,300,0),this.addMiniBug(430,-1934,300,0),this.addMiniBug(450,-1952,300,0),this.addMiniBug(276,-1982,300,0),this.addMiniBug(366,-2027,300,0),this.addMiniBug(266,-2012,300,0),this.addMiniBug(163,-2060,300,0),this.addMiniBug(193,-2060,300,0),this.addMiniBug(302,-2096,300,0),this.addMiniBug(116,-2140,300,0),this.addMiniBug(179,-2141,300,0),this.addMiniBug(67,-2147,300,0),this.addMiniBug(232,-2174,300,0),this.addMiniBug(339,-2174,300,0),this.addBugEnemy(219,-2174,"fish",100,"octoShot",401,111,300),this.addMiniBug(131,2204,300,0),this.addMiniBug(51,-2253,300,0),this.addBugEnemy(10,-2253,"fish",100,"stringBlue",110,110,500,10,5),this.addMiniBug(243,-2253,300,0),this.addBugEnemy(407,-2260,"fish",100,"stringBlue",407,110,500,-10,5),this.addBugEnemy(201,-2270,"fish",100,"stringBlue",201,110,500,0,5),this.addMiniBug(307,-2269,300,0),this.addMiniBug(179,-2285,300,0),this.addMiniBug(97,-2300,300,0),this.addMiniBug(243,-2325,300,0),this.addMiniBug(120,-2350,"fish",100,"stringBlue",120,220,500,5,5),this.addMiniBug(178,-2382,300,0),this.addMiniBug(274,-2382,300,0),this.addMiniBug(340,-2444,300,0),this.addMiniBug(291,-2492,300,0),this.addMiniBug(146,-2525,300,0),this.addMiniBug(404,-2532,300,0),this.addMiniBug(337,-2573,300,0),this.addBugEnemy(32,-2571,"grnVoid1",200,"quadShot2",221,220,400),this.addMiniBug(434,-2573,300,0),this.addMiniBug(389,-2632,300,0),this.addMiniBug(411,-2669,300,0),this.addMiniBug(67,-2652,300,0),this.addBugEnemy(243,-2793,"grnVoid1",230,"aimedRed",243,86,350),this.addBugEnemy(66,-2858,"grnVoid1",230,"aimedBlue",66,150,550),this.addBugEnemy(403,-2867,"grnVoid1",230,"aimedRed",403,167,350),this.addBugEnemy(96,-3230,"fish",100,"quadShot",96,231,500),this.addBugEnemy(415,-3505,"fish",100,"octoShot",300,330,1e3),this.addBugEnemy(98,-3602,"fish",100,"blue",200,250,500),this.addBugEnemy(359,-3779,"fish",100,"blue",359,250,500),this.addBugEnemy(127,3891,"fish",100,"red",127,300,500),this.addBugEnemy(399,-3927,"baxter",50,"blue",127,321,500),this.addBugEnemy(324,-4038,"baxter",50,"quadShot2",430,410,1e3),this.addBugEnemy(46,-4120,"baxter",50,"quadShot",240,210,500),this.addMiniBug(227,-4093,300,0),this.addMiniBug(339,-4252,300,0),this.addMiniBug(417,-4413,300,0),this.addMiniBug(450,-4527,300,0),this.addBugEnemy(99,-4451,"baxter",50,"tripleShot",99,50,400),this.addBugEnemy(322,-4451,"baxter",50,"tripleShot",322,50,400),this.addBugEnemy(222,-4542,"baxter",50,"quadShot2",222,130,800),this.addBugEnemy(223,-4612,"baxter",50,"octoShot",223,275,800),this.addBugEnemy(419,-4630,"baxter",50,"directionalShotBlue",419,99,800,19),this.addBugEnemy(115,-4937,"grnVoid1",200,"quadShot2",115,231,700),this.addBugEnemy(290,-4975,"grnVoid1",200,"aimedRed",290,241,700),this.addBugEnemy(421,-4985,"grnVoid1",200,"quadShot",410,251,700),this.addBugEnemy(287,-5120,"tomato",50,"octoShot",287,30,700),this.addBugEnemy(268,-5316,"tomato",50,"tripleShot",268,111,700),this.addBugEnemy(112,-5071,"tomato",50,"quadShot2",112,111,300),this.addBugEnemy(47,-5491,"fish",100,"red",47,131,300),this.addBugEnemy(304,-5540,"fish",100,"tripleShot",304,141,300),this.addBugEnemy(368,-5853,"fish",100,"blue",368,333,500),this.addBugEnemy(161,-5715,"tomato",50,"stringBlue",161,159,500,0,12),this.addBugEnemy(414,-5763,"tomato",50,"stringBlue",414,207,500,-29,7),this.addBugEnemy(370,-6020,"tomato",50,"tripleShot",370,301,500),this.addBugEnemy(67,-6048,"tomato",50,"blue",127,127,500),this.addBugEnemy(27,-6117,"tomato",50,"octoShot",27,210,900),this.addBugEnemy(157,-6116,"tomato",50,"quadShot2",157,210,900),this.addBugEnemy(429,-6097,"tomato",50,"quadShot",429,200,900),this.addBugEnemy(256,-6147,"fish",100,"tripleShot",256,311,400),this.addBugEnemy(130,-6297,"grnVoid1",200,"tripleShot",130,256),this.addBugEnemy(288,-6319,"tomato",50,"blue",150,120,500),this.addBugEnemy(378,-6444,"grnVoid1",200,"aimedBlue",120,240,300),this.addBugEnemy(194,-6713,"fish",100,"aimedBlue",98,201,300),this.addBugEnemy(83,-6713,"grnVoid1",200,"aimedBlue",83,389,300),this.addBugEnemy(353,-6895,"fish",100,"aimedBlue",353,100,300),this.physics.add.overlap(i,this.coins,this.collectCoin,null,this),this.physics.add.overlap(i,this.miniCoins,this.collectMiniCoin,null,this),this.physics.add.overlap(i,this.powerUps,this.powerUpPlayer,null,this),this.input.keyboard.on("keydown-X",this.shootLaser,this);this.input.activePointer;this.input.on("pointerdown",(e=>{this.shootLaser()})),this.physics.add.overlap(this.nmeGroup,this.laserGroup,this.damageEnemy,null,this),this.physics.add.collider(i,this.nmeGroup,this.playerHit,null,this),this.physics.add.collider(i,V,this.playerHit,null,this),this.physics.add.collider(i,k,this.playerHit,null,this),this.physics.add.overlap(k,this.laserGroup,this.killRedBullet,null,this),this.physics.add.overlap(this.nmeGroup,this.beams,this.damageEnemy,null,this),(r=this.physics.add.sprite(0,0,"bombtest").setOrigin(0,0)).setActive(!1),r.setVisible(!1),r.body.enable=!1,this.physics.add.overlap(this.nmeGroup,this.bombAnim,this.getBombed,null,this),this.anims.create({key:"explosion",frames:[{key:"expl1"},{key:"expl2"},{key:"expl3"},{key:"expl4"},{key:"expl5"},{key:"expl6"},{key:"expl7"},{key:"expl8"},{key:"expl9"},{key:"expl10"},{key:"expl11",duration:90}],frameRate:15,repeat:0}),this.anims.create({key:"coinSh",frames:this.anims.generateFrameNumbers("animatedCoin",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"miniCoin",frames:this.anims.generateFrameNumbers("miniCoin",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"greenAnim",frames:this.anims.generateFrameNumbers("animatedBeam",{start:0,end:2}),frameRate:20,repeat:-1}),this.anims.create({key:"shinyP",frames:this.anims.generateFrameNumbers("animPC",{start:0,end:3}),frameRate:20,repeat:-1}),this.anims.create({key:"grnVoid",frames:this.anims.generateFrameNumbers("greenVoid",{start:0,end:3}),frameRate:10,repeat:-1}),(A=this.add.sprite(0,0,"gameOverScreen")).setDepth(1),A.setOrigin(0,0),A.setActive(!1),A.setVisible(!1),(h=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"continueButton")).setDepth(1),h.setInteractive(),h.on("pointerdown",(()=>{this.continueGame()})),h.setActive(!1),h.setVisible(!1),(o=this.add.sprite(.5*this.scale.width,.7*this.scale.height,"titleButton")).setInteractive(),o.on("pointerdown",(()=>{this.toTitle()})),o.setActive(!1),o.setVisible(!1),(s=this.add.sprite(440,30,"pauseButton")).setDepth(1),s.setInteractive(),s.on("pointerdown",(()=>{this.pauseGame()})),(a=this.add.sprite(0,0,"pauseText")).setDepth(1),a.setOrigin(0,0),a.setActive(!1),a.setVisible(!1),this.spawnPowerUp(400,300),p=this.sound.add("shootingSound"),g=this.sound.add("laserPickupSound"),x=this.sound.add("coinPickupSound"),B=this.sound.add("explosionSound"),w=this.sound.add("pauseSound"),b=this.sound.add("bossAlert")}handlePointer(){this.input.on("pointermove",(e=>{i.setPosition(e.x,e.y)}))}initiateGameOver(){G=-1,D=0,U=!0;for(let e=0;e<3;e++)this.spawnCoin(i.x,i.y),this.spawnPowerUp(i.x,i.y);this.physics.world.timeScale=8,console.log("game over, idiot"),A.setActive(!0),A.setVisible(!0),h.setActive(!0),h.setVisible(!0),s.setActive(!1),s.setVisible(!1)}shootLaser(){if(X){var e=Math.floor(7*Math.random()-3);this.laserGroup.fireLaser(i.x+e,i.y-35),p.play(N)}}moveEnemy(e,t,i){if(this.cameras.main.worldView.contains(e.x,e.y)){this.tweens.add({targets:e,x:t,y:i,duration:4e3,ease:"Back",easeParams:[1.5],delay:0});e.inPos=!0}}addBugEnemy(e,t,i,s,a,n,h,o,d,l){var r=new Q({scene:this,x:e,y:t,type:i,health:s,weapon:a,fdelay:o,destX:n,destY:h,stringDir:d,strLength:l}).setScrollFactor(0,0);this.nmeGroup.add(r),r.setVelocity(0,87)}addMiniBug(e,t,i,s){var a=new J({scene:this,x:e,y:t,key:"miniBug",speed:i,ofstX:s});this.nmeGroup.add(a),a.setVelocity(0,87)}addBoss(e,t){M=new W({scene:this,x:e,y:t,key:"bossOne"}),this.moveEnemy(M,240,200),M.play("bossOneA"),this.nmeGroup.add(M),I=!0,this.bossHealthDisplay=this.add.text(10,100,"boss health: "+M.Health,{fontSize:"16px"});for(let e=0;e<290;e++)e<70?this.time.delayedCall(200*e,(function(){this.octoShot(Phaser.Math.Between(M.x-20,M.x+20),M.y)}),[],this):e>70&&e<90?this.time.delayedCall(200*e,(function(){M.Health>0&&(this.aimedShotRed(M.x,M.y),this.quadShot(M.x,M.y))}),[],this):e>90&&e<140?this.time.delayedCall(200*e,(function(){M.Health>0&&(this.time.delayedCall(2500,(function(){this.bulletString(4,20,M.x,M.y)}),[],this),this.bulletString(4,-20,M.x,M.y),this.directionalShotBlue(M.x+-20,M.y,20,100),this.aimedShotRed(M.x+20,M.y))}),[],this):e>140&&e<280?this.time.delayedCall(200*e,(function(){M.Health>0&&(this.directionalShotBlue(M.x-21,M.y+10,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+2,M.y+9,Phaser.Math.Between(-100,100),-60),this.directionalShotBlue(M.x-1,M.y+24,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+24,M.y+20,Phaser.Math.Between(-100,100),-60),this.directionalShotBlue(M.x-20,M.y+25,60,-9),this.directionalShotBlue(M.x-13,M.y-16,Phaser.Math.Between(-100,100),-60),this.directionalShotBlue(M.x+10,M.y-17,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-5,M.y-13,Phaser.Math.Between(-100,100),-60),this.directionalShotBlue(M.x+21,M.y-10,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+6,M.y-4,60,10),this.directionalShotBlue(M.x+5,M.y-2,60,0),this.directionalShotBlue(M.x-9,M.y-11,Phaser.Math.Between(-100,100),-60),this.directionalShotBlue(M.x-21,M.y-24,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-14,M.y+2,-60,0),this.directionalShotBlue(M.x+6,M.y+9,Phaser.Math.Between(-100,100),60))}),[],this):e>280&&this.time.delayedCall(200*e,(function(){e=0}),[],this)}blueShot(e,t){if(this.cameras.main.worldView.contains(e,t)){console.log("blue bullet fired");var i=new ie({scene:this,x:e,y:t});V.add(i),i.setVelocity(0,100)}}redShot(e,t){if(this.cameras.main.worldView.contains(e,t)){console.log("red bullet fired");var i=new ee({scene:this,x:e,y:t});k.add(i),i.setVelocity(0,100)}}aimedShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var s=new Phaser.Math.Vector2(i.x,i.y),a=new ie({scene:this,x:e,y:t});V.add(a),this.physics.moveToObject(a,s,100)}}aimedShotRed(e,t){if(this.cameras.main.worldView.contains(e,t)){var s=new Phaser.Math.Vector2(i.x,i.y),a=new ee({scene:this,x:e,y:t});k.add(a),this.physics.moveToObject(a,s,100)}}directionalShotBlue(e,t,i,s){if(this.cameras.main.worldView.contains(e,t)){null==s&&(this.dirY=100);var a=new ie({scene:this,x:e,y:t});V.add(a),a.setVelocity(i,s)}}bulletString(e,t,i,s){if(this.cameras.main.worldView.contains(i,s))for(var a=0;a<e;a++){var n=new ie({scene:this,x:i+a*(t/10),y:s+10*a});V.add(n),n.setVelocity(t,100)}}quadShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ie({scene:this,x:e,y:t+5});V.add(i),i.setVelocity(0,100);var s=new ie({scene:this,x:e+5,y:t});V.add(s),s.setVelocity(100,0);var a=new ie({scene:this,x:e-5,y:t});V.add(a),a.setVelocity(-100,0);var n=new ie({scene:this,x:e,y:t-5});V.add(n),n.setVelocity(0,-100)}}quadShot2(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ie({scene:this,x:e+5,y:t+5});V.add(i),i.setVelocity(50,100);var s=new ie({scene:this,x:e+5,y:t-5});V.add(s),s.setVelocity(50,-100);var a=new ie({scene:this,x:e-5,y:t-5});V.add(a),a.setVelocity(-50,100);var n=new ie({scene:this,x:e-5,y:t+5});V.add(n),n.setVelocity(-50,-100)}}octoShot(e,t){if(this.cameras.main.worldView.contains(e,t)){this.quadShot(e,t);var i=new ie({scene:this,x:e+5,y:t+5});V.add(i),i.setVelocity(50,100);var s=new ie({scene:this,x:e+5,y:t-5});V.add(s),s.setVelocity(50,-100);var a=new ie({scene:this,x:e-5,y:t-5});V.add(a),a.setVelocity(-50,100);var n=new ie({scene:this,x:e-5,y:t+5});V.add(n),n.setVelocity(-50,-100)}}tripleShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ee({scene:this,x:e,y:t});k.add(i),i.setVelocity(0,100);var s=new ie({scene:this,x:e+5,y:t});V.add(s),s.setVelocity(15,100);var a=new ie({scene:this,x:e-5,y:t});V.add(a),a.setVelocity(-15,100)}}spinShot(){}clusterA(e,t){this.directionalShotBlue(this.x,this.y,12),this.directionalShotBlue(this.x,this.y,18),this.directionalShotBlue(this.x,this.y,15),this.directionalShotBlue(this.x,this.y,5),this.directionalShotBlue(this.x,this.y,0),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,-1)}clusterB(e,t){this.directionalShotBlue(this.x,this.y,0),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,-15),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,20),this.directionalShotBlue(this.x,this.y,19),this.directionalShotBlue(this.x,this.y,-13)}spawnCoin(e,t){var i=Math.floor(21*Math.random()-10),s=Math.floor(21*Math.random()-10),a=new re({scene:this,x:e+i,y:t+s});this.coins.add(a),a.setGravity(0,10),a.setBounce(10),a.setVelocity(i,-2*s),a.play("coinSh")}spawnMiniCoin(e,t){var i=new ye({scene:this,x:e,y:t});this.miniCoins.add(i),i.setGravity(0,140),i.setBounce(10),i.setVelocity(0,-140),i.play("miniCoin")}spawnPowerUp(e,t){var i=new ue({scene:this,x:e,y:t});this.powerUps.add(i),i.setGravity(0,90),i.setBounce(10),i.setVelocity(0,-140),i.play("shinyP")}activateBomb(){T>0&&X?(T-=1,this.bombing=!0,console.log("Bomb activated"),(r=this.physics.add.sprite(0,0,"bombtest").setOrigin(0,0)).body.enable=!0,r.setActive(!0),r.setVisible(!0),this.cameras.main.shake(300),c.remove(c.getLast(!0),!0),this.time.delayedCall(50,(function(){r.destroy(),this.bombing=!1}),[],this)):console.log("no more bombs available")}fireGreen(){X&&(K?(P.setPosition(f.x-4,f.y-21),P.setActive(!0,!0),3==L&&(v.setPosition(S.x-4,S.y-21),v.setActive(!0,!0))):(2==L&&(K=!0,P=new de({scene:this,x:f.x,y:f.y-10}),this.beams.add(P),P.setOrigin(0,1),P.play("greenAnim")),3==L&&(K=!0,P=new de({scene:this,x:f.x,y:f.y-10}),this.beams.add(P),P.setOrigin(0,1),P.play("greenAnim"),v=new de({scene:this,x:S.x,y:S.y-10}),this.beams.add(v),v.setOrigin(0,1),v.play("greenAnim"))),console.log("lazer firing"))}addLeadingZeros(e,t){return String(e).padStart(t,"0")}update(){var e=this.input.activePointer;if(e.isDown)!0===X&&(this.handlePointer(),this.shootLaser(),this.fireGreen()),L>=2&&f.setPosition(i.x-35,i.y-5);else{var t=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z),s=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.C),a=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);t.isDown&&(this.shootLaser(),this.fireGreen()),Phaser.Input.Keyboard.JustDown(s)&&this.activateBomb(),Phaser.Input.Keyboard.JustDown(a)&&this.pauseGame(),y.left.isDown?i.setVelocityX(-200):y.right.isDown?i.setVelocityX(q):i.setVelocityX(0),y.up.isDown?i.setVelocityY(-200):y.down.isDown?i.setVelocityY(q):i.setVelocityY(0)}L>=2&&f.setPosition(i.x-35,i.y-5),3==L&&S.setPosition(i.x+35,i.y-5),e.isDown||t.isDown||1==K&&(P.disableBody(!0,!0),L>=3&&v.disableBody(!0,!0),K=!1),I?this.bossHealthDisplay.setText("boss health: "+M.Health):d.tilePositionY-=1,E.setText(this.addLeadingZeros(D,9)),C.setText("x"+this.addLeadingZeros(H,3)),H>1&&!R&&(H-=1),D>=F&&(F=D)}}class ge extends Phaser.Scene{constructor(){super("PlayGame2")}prelaod(){}passStage(){var e;let t;O?e=1e5:O||(e=0);let i=this.add.sprite(0,0,"stageComplete");i.setDepth(0),i.setOrigin(0,0);this.add.text(.2*this.scale.width,.25*this.scale.height,"Kills: "+u+" x1000 = "+1e3*u,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1}),this.add.text(.2*this.scale.width,.25*this.scale.height+35,"Coins: "+m+" x1000 = "+1e3*m,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1}),this.add.text(.2*this.scale.width,.25*this.scale.height+70,"No miss: "+e,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1});t=1e3*m+1e3*u+e,D+=t,this.time.delayedCall(4e3,(function(){this.cameras.main.fadeOut(1e3,0,0,0)}),[],this),this.time.delayedCall(5e3,(function(){this.bossMusic.stop(),this.scene.start("PlayGame3")}),[],this)}pauseGame(){e(),U?U&&this.continueGame():(w.play(N),this.scene.pause("PlayGame2"),this.scene.launch("PauseButton"),console.log("Game paused."),s.setActive(!1),s.setVisible(!1),a.setActive(!0),a.setVisible(!0))}scorePoints(e,t,i){var s;D+=s=e*H;let a=this.add.text(t,i,"+"+s,{fontFamily:"pxlFont",fontSize:"16px",fill:"#fff",stroke:"#000",strokeThickness:1});this.time.delayedCall(1e3,(function(){a.destroy()}),[],this)}collectCoin(e,t){t.disableBody(!0,!0),m+=1,this.scorePoints(10,t.x,t.y),x.play(N)}collectMiniCoin(e,t){t.disableBody(!0,!0);let i=this.add.text(t.x,t.y-10,"MULTI + 1",{fontFamily:"pxlFont",fontSize:"12px",fill:"#A7DBD8",stroke:"#000",strokeThickness:1});this.scorePoints(5,t.x,t.y+15),H+=1,this.time.delayedCall(1e3,(function(){i.destroy()}),[],this),this.addTimer(),x.play(N)}powerUpPlayer(e,t){t.disableBody(!0,!0),g.play(N),1==L?(console.log("power up collected, power level: "+L),f=new he({scene:this,x:e.x-15,y:e.y+15}),L+=1,this.scorePoints(100,e.x,e.y+10)):2==L&&(console.log("power up collected, power level: "+L),S=new he({scene:this,x:e.x+15,y:e.y+15}),L+=1,this.scorePoints(1e3,e.x,e.y+5),K&&(v=new de({scene:this,x:S.x,y:S.y-10}),this.beams.add(v),v.setOrigin(0,1),v.play("greenAnim")))}explode(e,t,i){for(let s=0;s<i;s++)this.time.delayedCall(200*s,(function(){this.add.sprite(Phaser.Math.Between(e-10,e+10),Phaser.Math.Between(t-10,t+10),"expl1").play("explosion"),B.play(N)}),[],this)}getBombed(e,t){e.Health=e.Health-100,this.damageEnemy(e,t)}damageEnemy(e,t){if(this.cameras.main.worldView.contains(e.x,e.y)&&1==e.canHit&&(e.canHit=!1,e.setTintFill(268435455),e.Health=e.Health-(10+L+3*L),console.log("enemy hit, health:"+e.Health),this.time.delayedCall(100,(function(){e.clearTint(),e.canHit=!0}),[],this),e.Health<=0))if(e.isBoss){if(e.isBoss){console.log("boss destroyed"),I=!1,u+=1;for(let t=0;t<12;t++)this.time.delayedCall(200*t,(function(){B.play(N),this.add.sprite(Phaser.Math.Between(e.x-50,e.x+50),Phaser.Math.Between(e.y+60,e.y-60),"expl1").play("explosion")}),[],this),this.spawnCoin(Phaser.Math.Between(e.x-100,e.x+100),Phaser.Math.Between(e.y+200,e.y-50));e.destroy(),this.time.delayedCall(6e3,this.passStage,[],this)}}else{u+=1,this.scorePoints(50,e.x,e.y+5),this.explode(e.x,e.y,2);let t=Phaser.Math.Between(0,10);5==t?this.spawnPowerUp(e.x,e.y):t>5?this.spawnCoin(e.x,e.y):t<5&&this.spawnMiniCoin(e.x,e.y),e.setActive(!1),e.setVisible(!1),e.destroy()}}killRedBullet(e,t){console.log("red bullet hit"),e.disableBody(!0,!0),t.setActive(!1),t.setVisible(!1),this.scorePoints(1,e.x,e.y)}respawnPlayer(){sdk.showBanner(),i.setActive(!0),i.setVisible(!0),i.setAlpha(.5),z=!1,this.time.delayedCall(2500,(function(){i.body.enable=!0,z=!0,i.setAlpha(1)}),[],this),X=!0,T=3}continueGame(){w.play(N),this.physics.world.timeScale=1,this.respawnPlayer(),G=3,D=0,T=3,this.addLives(),this.addBombs(),U=!1,h.setActive(!1),h.setVisible(!1),o.setActive(!1),o.setVisible(!1),A.setVisible(!1),s.setActive(!0),s.setVisible(!0)}toTitle(){this.scene.stop("PlayGame"),this.scene.start("BootGame")}addLives(){l=this.add.group({key:"playerIcon",repeat:1,setXY:{x:16,y:616,stepX:32}})}addBombs(){c=this.add.group({key:"bombIcon",repeat:2,setXY:{x:390,y:616,stepX:32}})}playerHit(e,t){z&&(console.log("Player hit"),O=!1,this.damageEnemy(t,this.laserGroup),X=!1,z=!1,this.explode(e.x,e.y,4),e.setVisible(!1),e.setActive(!1),e.body.enable=!1,G-=1,l.remove(l.getLast(!0),!0),0===G?this.initiateGameOver():this.time.delayedCall(2e3,this.respawnPlayer,[],this))}addTimer(){R=!0,this.time.addEvent({delay:3e4,callback:function(){R=!1},loop:!1})}startBossBattle(){let e=this.add.sprite(0,0,"warning");e.setOrigin(0,0),e.setAlpha(0),b.play({mute:!1,volume:.5,loop:!0,delay:0});this.tweens.add({targets:e,alphaTopLeft:{value:1,duration:500,ease:"Power1"},alphaBottomRight:{value:1,duration:500,ease:"Power1"},alphaBottomLeft:{value:1,duration:500,ease:"Power1"},yoyo:!0,loop:-1});this.tweens.add({targets:this.stageMusic,volume:0,duration:2e3}),this.time.delayedCall(4e3,(function(){e.destroy(),b.stop(),this.bossMusic.play(Y),this.addBoss(240,10)}),[],this)}create(){this.cameras.main.fadeIn(1e3,0,0,0),(d=this.add.tileSprite(0,0,this.scale.width,this.scale.height,"stageTwoBG")).setOrigin(0,0),this.stageMusic=this.sound.add("stageTwoSong"),this.stageMusic.play(Y),this.bossMusic=this.sound.add("bossBattleSong"),this.anims.create({key:"animPlayer",frames:this.anims.generateFrameNumbers("animatedPlayer",{start:0,end:3}),frameRate:10,repeat:-1}),(i=this.physics.add.sprite(240,400,"mech")).play("animPlayer"),i.setBounce(1),i.setGravity(0),i.setCollideWorldBounds(!0),i.setSize(1,1),i.setOffset(23,23),2==L?f=new he({scene:this,x:i.x-15,y:i.y+15}):3==L&&(f=new he({scene:this,x:i.x-15,y:i.y+15}),S=new he({scene:this,x:i.x+15,y:i.y+15})),y=this.input.keyboard.createCursorKeys();this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);this.laserGroup=new ae(this),this.beams=new oe(this),O=!0,u=0,m=0,(E=this.add.text(5,5,"000000000",{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:3})).setScrollFactor(0),(C=this.add.text(5,25,"x001",{fontFamily:"pxlFont",fontSize:"32px",fill:"#A7DBD8",stroke:"#000",strokeThickness:3})).setScrollFactor(0),this.addBombs();V=new te(this),k=new $(this),this.addLives(),this.coins=new le(this),this.spawnCoin(12,450),this.powerUps=new me(this),this.miniCoins=new ce(this),this.anims.create({key:"bossTwoA",frames:this.anims.generateFrameNumbers("bossTwoAnim",{start:0,end:4}),frameRate:5,repeat:-1}),this.nmeGroup=new _(this),this.addBugEnemy(192,-102,"purpleB",50,"quadShot2",193,72,690),this.addBugEnemy(407,-100,"fish",100,"arrowString",407,110,500,-10,5),this.addBugEnemy(158,-387,"Mwing",200,"blue",311,130,300),this.addBugEnemy(318,-582,"Dbomber",400,"largeBlueShot",98,202,1200),this.addBugEnemy(191,-714,"Dbomber",400,"largeBlueShot",390,202,1200),this.addBugEnemy(319,-838,"Mwing",300,"tripleShot",319,167,400),this.addMiniBug(98,-826,300,0),this.addBugEnemy(414,-998,"Dbomber",400,"largeBlueShot",13,200,800),this.addMiniBug(159,-1082,300,0),this.addMiniBug(230,-1100,300,0),this.addBugEnemy(256,-1156,"Mwing",200,"octoShot",256,270,700),this.addMiniBug(356,-1211,300,0),this.addMiniBug(200,-1276,300,0),this.addBugEnemy(95,-1305,"Mwing",200,"arrowString",128,220,650,8,4),this.addBugEnemy(388,-1371,"Mwing",200,"arrowString",357,180,650,-8,7),this.addBugEnemy(254,-1539,"Mwing",200,"arrowString",252,55,2e3,0,8),this.addMiniBug(36,-1532,300,0),this.addMiniBug(476,-1556,300,0),this.addBugEnemy(351,1729,"Dbomber",400,"largeBlueShot",291,291,800),this.addBugEnemy(156,-1849,"dikbug2",200,"red",196,200,400),this.addBugEnemy(282,-2071,"Xwing",200,"aimedBlue",200,100,800),this.addBugEnemy(94,-2177,"Mwing",200,"aimedRed",124,149,600),this.addBugEnemy(382,-2309,"Mwing",200,"stringBlue",346,300,800,-20,4),this.addMiniBug(290,-2388,300,0),this.addBugEnemy(162,-2464,"Mwing",200,"quadShot2",122,322,1200),this.addMiniBug(60,-2528,300,0),this.addMiniBug(224,-2648,300,0),this.addBugEnemy(378,-2662,"Mwing",200,"octoShot",378,65,1200),this.addBugEnemy(95,-2577,"Xwing",200,"tripleShot",145,95,800),this.addBugEnemy(191,-2840,"Xwing",200,"aimedRed",191,95,400),this.addBugEnemy(416,-2840,"Xwing",200,"arrowString",380,211,1e3,0,8),this.addBugEnemy(318,-2924,"Vwing",200,"octoShot",199,198,1200),this.addMiniBug(290,-2812,300,0),this.addMiniBug(170,-2903,300,0),this.addMiniBug(96,-1938,300,0),this.addMiniBug(253,-3075,300,0),this.addMiniBug(65,-3099,300,0),this.addMiniBug(130,-3277,300,0),this.addMiniBug(419,-3328,300,0),this.addBugEnemy(95,-3165,"Xwing",200,"stringBlue",240,20,1200,0,6),this.addMiniBug(453,-3356,300,0),this.addMiniBug(65,-3450,300,0),this.addBugEnemy(128,-3522,"Vwing",200,"tripleShot",98,300,500),this.addBugEnemy(448,-3557,"Vwing",200,"quadShot",240,256,700),this.addBugEnemy(317,-3713,"Vwing",200,"clusterA",219,129,1e3),this.addBugEnemy(256,-3873,"purpleB",400,"largeBlueShot",256,40,1e3),this.addBugEnemy(352,-4125,"Xwing",200,"clusterA",352,200,800),this.addBugEnemy(129,-4158,"Vwing",200,"tripleShot",219,300,400),this.addBugEnemy(416,-4446,"Vwing",200,"clusterB",17,30,900),this.addBugEnemy(191,-4478,"Vwing",200,"quadShot2",240,280,200),this.addBugEnemy(63,-4670,"Vwing",200,"quadShot",430,211,500),this.addBugEnemy(413,-4803,"bossOne",500,"boss1patt1",295,122,500),this.addBugEnemy(349,-4996,"Mwing",200,"aimedRed",349,333,800),this.addBugEnemy(189,-5121,"bossOne",500,"boss1patt2",196,122,3e3),this.addMiniBug(67,-5212,300,0),this.addMiniBug(227,-5244,300,0),this.addMiniBug(67,-5277,300,0),this.addMiniBug(130,-5309,300,0),this.addMiniBug(322,-5309,300,0),this.addMiniBug(228,-5340,300,0),this.addMiniBug(418,-5342,300,0),this.addMiniBug(292,-5405,300,0),this.addMiniBug(385,-5467,300,0),this.addMiniBug(477,-5499,300,0),this.addMiniBug(227,-5532,300,0),this.addMiniBug(299,-5533,300,0),this.addMiniBug(131,-5564,300,0),this.addMiniBug(387,-5564,300,0),this.addMiniBug(66,-5628,300,0),this.addMiniBug(100,-5691,300,0),this.addMiniBug(65,-5753,300,0),this.addBugEnemy(128,-5410,"Vwing",200,"octoShot",301,218,1e3),this.addBugEnemy(449,-5663,"Vwing",200,"octoShot",111,260,800),this.addBugEnemy(287,-5987,"Mwing",200,"arrowString",331,187,700,-20,8),this.addBugEnemy(159,-6044,"Mwing",200,"arrowString",121,162,700,12,6),this.addBugEnemy(257,-6223,"Xwing",200,"arrowString",229,210,400,0,9),this.addBugEnemy(351,-6250,"Dbomber",400,"largeBlue",351,333,600),this.addBugEnemy(64,-6393,"Xwing",200,"stringBlue",83,251,500,18,3),this.addBugEnemy(351,-6459,"Xwing",200,"stringBlue",351,111,400,-10,3),this.addBugEnemy(225,-6559,"dikbug2",400,"clusterB",225,299,1400),this.addBugEnemy(415,-6890,"Dbomber",400,"largeBlueShot",189,189,900),this.time.delayedCall(87e3,(function(){this.startBossBattle()}),[],this),this.physics.add.overlap(this.nmeGroup,this.laserGroup,this.damageEnemy,null,this),this.physics.add.collider(i,this.nmeGroup,this.playerHit,null,this),this.physics.add.collider(i,V,this.playerHit,null,this),this.physics.add.collider(i,k,this.playerHit,null,this),this.physics.add.overlap(k,this.laserGroup,this.killRedBullet,null,this),this.physics.add.overlap(this.nmeGroup,this.beams,this.damageEnemy,null,this),this.anims.create({key:"explosion",frames:[{key:"expl1"},{key:"expl2"},{key:"expl3"},{key:"expl4"},{key:"expl5"},{key:"expl6"},{key:"expl7"},{key:"expl8"},{key:"expl9"},{key:"expl10"},{key:"expl11",duration:90}],frameRate:15,repeat:0}),this.anims.create({key:"coinSh",frames:this.anims.generateFrameNumbers("animatedCoin",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"miniCoin",frames:this.anims.generateFrameNumbers("miniCoin",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"greenAnim",frames:this.anims.generateFrameNumbers("animatedBeam",{start:0,end:2}),frameRate:20,repeat:-1}),this.anims.create({key:"shinyP",frames:this.anims.generateFrameNumbers("animPC",{start:0,end:3}),frameRate:20,repeat:-1}),this.anims.create({key:"grnVoid",frames:this.anims.generateFrameNumbers("greenVoid",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"lrgBlueAn",frames:this.anims.generateFrameNumbers("largeBlueAnim",{start:0,end:3}),frameRate:20,repeat:-1}),this.physics.add.overlap(i,this.coins,this.collectCoin,null,this),this.physics.add.overlap(i,this.miniCoins,this.collectMiniCoin,null,this),this.physics.add.overlap(i,this.powerUps,this.powerUpPlayer,null,this),this.input.keyboard.on("keydown-X",this.shootLaser,this);this.input.activePointer;this.input.on("pointerdown",(e=>{this.shootLaser()})),(A=this.add.sprite(0,0,"gameOverScreen")).setDepth(1),A.setOrigin(0,0),A.setActive(!1),A.setVisible(!1),(h=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"continueButton")).setDepth(1),h.setInteractive(),h.on("pointerdown",(()=>{this.continueGame()})),h.setActive(!1),h.setVisible(!1),(o=this.add.sprite(.5*this.scale.width,.7*this.scale.height,"titleButton")).setInteractive(),o.on("pointerdown",(()=>{this.toTitle()})),o.setActive(!1),o.setVisible(!1),(s=this.add.sprite(440,30,"pauseButton")).setDepth(1),s.setInteractive(),s.on("pointerdown",(()=>{this.pauseGame()})),(a=this.add.sprite(0,0,"pauseText")).setDepth(1),a.setOrigin(0,0),a.setActive(!1),a.setVisible(!1),this.spawnPowerUp(400,300),p=this.sound.add("shootingSound"),g=this.sound.add("laserPickupSound"),x=this.sound.add("coinPickupSound"),B=this.sound.add("explosionSound"),w=this.sound.add("pauseSound"),b=this.sound.add("bossAlert")}handlePointer(){this.input.on("pointermove",(e=>{i.setPosition(e.x,e.y)}))}initiateGameOver(){G=-1,D=0,U=!0;for(let e=0;e<3;e++)this.spawnCoin(i.x,i.y),this.spawnPowerUp(i.x,i.y);this.physics.world.timeScale=8,console.log("game over, idiot"),A.setActive(!0),A.setVisible(!0),h.setActive(!0),h.setVisible(!0),s.setActive(!1),s.setVisible(!1)}shootLaser(){if(X){var e=Math.floor(7*Math.random()-3);this.laserGroup.fireLaser(i.x+e,i.y-35),p.play(N)}}moveEnemy(e,t,i){if(this.cameras.main.worldView.contains(e.x,e.y)){this.tweens.add({targets:e,x:t,y:i,duration:4e3,ease:"Back",easeParams:[1.5],delay:0});e.inPos=!0}}addBugEnemy(e,t,i,s,a,n,h,o,d,l){var r=new Q({scene:this,x:e,y:t,type:i,health:s,weapon:a,fdelay:o,destX:n,destY:h,stringDir:d,strLength:l}).setScrollFactor(0,0);this.nmeGroup.add(r),r.setVelocity(0,87)}addMiniBug(e,t,i,s){var a=new J({scene:this,x:e,y:t,key:"miniBug",speed:i,ofstX:s});this.nmeGroup.add(a),a.setVelocity(0,87)}addBoss(e,t){(M=new Z({scene:this,x:e,y:t,key:"bossTwo"})).play("bossTwoA"),this.moveEnemy(M,240,200),this.nmeGroup.add(M),I=!0,this.bossHealthDisplay=this.add.text(10,100,"boss health: "+M.Health,{fontSize:"16px"});for(let t=-60;t<1e3;t++)t<120?(this.time.delayedCall(200*t,(function(){this.blueShot(Phaser.Math.Between(M.x-200,M.x+200),M.y),this.redShot(Phaser.Math.Between(M.x-100,M.x-50),M.y),this.redShot(Phaser.Math.Between(M.x+100,M.x+50),M.y),this.quadShot2(M.x,M.y+20),this.largeBlueShot(M.x,M.y)}),[],this),this.time.delayedCall(200*t,(function(){this.directionalShotBlue(M.x,M.y,100,0),this.directionalShotBlue(M.x,M.y,-100,0)}),[],this)):t>120&&t<240?(this.moveEnemy(M,240,60),this.time.delayedCall(200*t,(function(){if(M.Health>0){let e=Phaser.Math.Between(0,12);1==e?this.bulletString(6,0,M.x,M.y):2==e?this.bulletString(6,0,M.x-56,M.y):3==e?this.bulletString(6,0,M.x+40,M.y):4==e?this.bulletString(6,0,M.x+63,M.y):5==e?this.bulletString(6,0,M.x+72,M.y):6==e?this.bulletString(6,0,M.x-23,M.y):7==e?this.bulletString(6,0,M.x-40,M.y):8==e?this.bulletString(6,0,M.x+200,M.y):9==e?this.bulletString(6,0,M.x-240,M.y):10==e?this.bulletString(6,0,M.x+105,M.y):11==e?this.bulletString(6,0,M.x+118,M.y):12==e&&this.bulletString(6,0,M.x-187,M.y),this.arrowString(Phaser.Math.Between(5,10),Phaser.Math.Between(15,35),M.x-170,Phaser.Math.Between(M.y-20,M.y+20)),this.arrowString(Phaser.Math.Between(5,10),Phaser.Math.Between(-15,-35),M.x+170,Phaser.Math.Between(M.y-20,M.y+20))}}),[],this)):t>240&&t<1e3?this.time.delayedCall(200*t,(function(){let t=Phaser.Math.Between(0,10);M.Health>0&&(e>0&&e<6?(this.directionalShotBlue(M.x-6,M.y+10,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+33,M.y+9,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-28,M.y+24,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+3,M.y+20,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-17,M.y+25,60,60),this.directionalShotBlue(M.x+6,M.y-16,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-15,M.y-17,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-12,M.y+10,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+-38,M.y+9,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-17,M.y+24,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+32,M.y+20,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x-43,M.y+25,60,60),this.directionalShotBlue(M.x+5,M.y-16,Phaser.Math.Between(-100,100),60),this.directionalShotBlue(M.x+15,M.y-17,Phaser.Math.Between(-100,100),60),this.aimedShotRed(Phaser.Math.Between(M.x-30,M+30),M.y),this.aimedShotRed(Phaser.Math.Between(M.x-30,M+30),M.y)):t>5&&t<11&&(this.directionalShotBlue(M.x+44,M.y-13,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x+34,M.y-10,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x-29,M.y-4,60,60),this.directionalShotBlue(M.x-6,M.y-2,60,60),this.directionalShotBlue(M.x-22,M.y-11,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x-26,M.y-24,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x-7,M.y+2,60,60),this.directionalShotBlue(M.x-13,M.y+9,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x+42,M.y-13,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x+32,M.y-10,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x-20,M.y-4,60,10),this.directionalShotBlue(M.x-46,M.y-2,60,60),this.directionalShotBlue(M.x- -49,M.y-11,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x+28,M.y-24,Phaser.Math.Between(-60,60),60),this.directionalShotBlue(M.x+25,M.y+2,60,60),this.directionalShotBlue(M.x-22,M.y+9,Phaser.Math.Between(-60,60),60),this.aimedShotRed(Phaser.Math.Between(M.x-60,M+60),M.y),this.aimedShotRed(Phaser.Math.Between(M.x-60,M+60),M.y)))}),[],this):t>1e3&&(t=0)}blueShot(e,t){if(this.cameras.main.worldView.contains(e,t)){console.log("blue bullet fired");var i=new ie({scene:this,x:e,y:t});V.add(i),i.setVelocity(0,100)}}redShot(e,t){if(this.cameras.main.worldView.contains(e,t)){console.log("red bullet fired");var i=new ee({scene:this,x:e,y:t});k.add(i),i.setVelocity(0,100)}}aimedShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var s=new Phaser.Math.Vector2(i.x,i.y),a=new ie({scene:this,x:e,y:t});V.add(a),this.physics.moveToObject(a,s,100)}}aimedShotRed(e,t){if(this.cameras.main.worldView.contains(e,t)){var s=new Phaser.Math.Vector2(i.x,i.y),a=new ee({scene:this,x:e,y:t});k.add(a),this.physics.moveToObject(a,s,100)}}directionalShotBlue(e,t,i,s){if(this.cameras.main.worldView.contains(e,t)){null==s&&(this.dirY=100);var a=new ie({scene:this,x:e,y:t});V.add(a),a.setVelocity(i,s)}}bulletString(e,t,i,s){if(this.cameras.main.worldView.contains(i,s))for(var a=0;a<e;a++){var n=new ie({scene:this,x:i+a*(t/10),y:s+10*a});V.add(n),n.setVelocity(t,100)}}arrowString(e,t,i,s){if(this.cameras.main.worldView.contains(i,s))for(var a=0;a<e;a++){var n=new se({scene:this,x:i,y:s,key:"greenArrow"});V.add(n),n.setVelocity(t,100)}}quadShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ie({scene:this,x:e,y:t+5});V.add(i),i.setVelocity(0,100);var s=new ie({scene:this,x:e+5,y:t});V.add(s),s.setVelocity(100,0);var a=new ie({scene:this,x:e-5,y:t});V.add(a),a.setVelocity(-100,0);var n=new ie({scene:this,x:e,y:t-5});V.add(n),n.setVelocity(0,-100)}}quadShot2(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ie({scene:this,x:e+5,y:t+5});V.add(i),i.setVelocity(50,100);var s=new ie({scene:this,x:e+5,y:t-5});V.add(s),s.setVelocity(50,-100);var a=new ie({scene:this,x:e-5,y:t-5});V.add(a),a.setVelocity(-50,100);var n=new ie({scene:this,x:e-5,y:t+5});V.add(n),n.setVelocity(-50,-100)}}octoShot(e,t){if(this.cameras.main.worldView.contains(e,t)){this.quadShot(e,t);var i=new ie({scene:this,x:e+5,y:t+5});V.add(i),i.setVelocity(50,100);var s=new ie({scene:this,x:e+5,y:t-5});V.add(s),s.setVelocity(50,-100);var a=new ie({scene:this,x:e-5,y:t-5});V.add(a),a.setVelocity(-50,100);var n=new ie({scene:this,x:e-5,y:t+5});V.add(n),n.setVelocity(-50,-100)}}tripleShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ee({scene:this,x:e,y:t});k.add(i),i.setVelocity(0,100);var s=new ie({scene:this,x:e+5,y:t});V.add(s),s.setVelocity(15,100);var a=new ie({scene:this,x:e-5,y:t});V.add(a),a.setVelocity(-15,100)}}spinShot(){}clusterA(e,t){this.directionalShotBlue(this.x,this.y,12),this.directionalShotBlue(this.x,this.y,18),this.directionalShotBlue(this.x,this.y,15),this.directionalShotBlue(this.x,this.y,5),this.directionalShotBlue(this.x,this.y,0),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,-1)}clusterB(e,t){this.directionalShotBlue(this.x,this.y,0),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,-15),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,20),this.directionalShotBlue(this.x,this.y,19),this.directionalShotBlue(this.x,this.y,-13)}largeBlueShot(e,t,i){if(this.cameras.main.worldView.contains(e,t)){var s=new se({scene:this,x:e,y:t,key:"largeBlue"});V.add(s),s.play("lrgBlueAn"),s.setSize(16,16),s.setVelocity(0,-55),s.setGravity(Phaser.Math.Between(-5,5),55)}}spawnCoin(e,t){var i=Math.floor(21*Math.random()-10),s=Math.floor(21*Math.random()-10),a=new re({scene:this,x:e+i,y:t+s});this.coins.add(a),a.setGravity(0,10),a.setBounce(10),a.setVelocity(i,-2*s),a.play("coinSh")}spawnMiniCoin(e,t){var i=new ye({scene:this,x:e,y:t});this.miniCoins.add(i),i.setGravity(0,140),i.setBounce(10),i.setVelocity(0,-140),i.play("miniCoin")}spawnPowerUp(e,t){var i=new ue({scene:this,x:e,y:t});this.powerUps.add(i),i.setGravity(0,90),i.setBounce(10),i.setVelocity(0,-140),i.play("shinyP")}activateBomb(){T>0&&X?(T-=1,this.bombing=!0,console.log("Bomb activated"),(r=this.physics.add.sprite(0,0,"bombtest").setOrigin(0,0)).body.enable=!0,r.setActive(!0),r.setVisible(!0),this.cameras.main.shake(300),c.remove(c.getLast(!0),!0),this.time.delayedCall(50,(function(){r.destroy(),this.bombing=!1}),[],this)):console.log("no more bombs available")}fireGreen(){X&&(K?(P.setPosition(f.x-4,f.y-21),P.setActive(!0,!0),3==L&&(v.setPosition(S.x-4,S.y-21),v.setActive(!0,!0))):(2==L&&(K=!0,P=new de({scene:this,x:f.x,y:f.y-10}),this.beams.add(P),P.setOrigin(0,1),P.play("greenAnim")),3==L&&(K=!0,P=new de({scene:this,x:f.x,y:f.y-10}),this.beams.add(P),P.setOrigin(0,1),P.play("greenAnim"),v=new de({scene:this,x:S.x,y:S.y-10}),this.beams.add(v),v.setOrigin(0,1),v.play("greenAnim"))),console.log("lazer firing"))}addLeadingZeros(e,t){return String(e).padStart(t,"0")}update(){var e=this.input.activePointer;if(e.isDown)!0===X&&(this.handlePointer(),this.shootLaser(),this.fireGreen()),L>=2&&f.setPosition(i.x-35,i.y-5);else{var t=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z),s=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.C),a=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);t.isDown&&(this.shootLaser(),this.fireGreen()),Phaser.Input.Keyboard.JustDown(s)&&this.activateBomb(),Phaser.Input.Keyboard.JustDown(a)&&this.pauseGame(),y.left.isDown?i.setVelocityX(-200):y.right.isDown?i.setVelocityX(q):i.setVelocityX(0),y.up.isDown?i.setVelocityY(-200):y.down.isDown?i.setVelocityY(q):i.setVelocityY(0)}L>=2&&f.setPosition(i.x-35,i.y-5),3==L&&S.setPosition(i.x+35,i.y-5),e.isDown||t.isDown||1==K&&(P.disableBody(!0,!0),L>=3&&v.disableBody(!0,!0),K=!1),I?this.bossHealthDisplay.setText("boss health: "+M.Health):d.tilePositionY-=2,E.setText(this.addLeadingZeros(D,9)),C.setText("x"+this.addLeadingZeros(H,3)),H>1&&!R&&(H-=1),D>=F&&(F=D)}}class xe extends Phaser.Scene{constructor(){super("PlayGame3")}prelaod(){}passStage(){var e;let t;O?e=1e5:O||(e=0);let i=this.add.sprite(0,0,"stageComplete");i.setDepth(0),i.setOrigin(0,0);this.add.text(.2*this.scale.width,.25*this.scale.height,"Kills: "+u+" x1000 = "+1e3*u,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1}),this.add.text(.2*this.scale.width,.25*this.scale.height+35,"Coins: "+m+" x1000 = "+1e3*m,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1}),this.add.text(.2*this.scale.width,.25*this.scale.height+70,"No miss: "+e,{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:1});t=1e3*m+1e3*u+e,D+=t,this.time.delayedCall(4e3,(function(){this.cameras.main.fadeOut(1e3,0,0,0)}),[],this),this.time.delayedCall(5e3,(function(){this.bossMusic.stop(),this.scene.start("TitleScreen")}),[],this)}pauseGame(){e(),U?U&&this.continueGame():(w.play(N),this.scene.pause("PlayGame3"),this.scene.launch("PauseButton"),console.log("Game paused."),s.setActive(!1),s.setVisible(!1),a.setActive(!0),a.setVisible(!0))}scorePoints(e,t,i){var s;D+=s=e*H;let a=this.add.text(t,i,"+"+s,{fontFamily:"pxlFont",fontSize:"16px",fill:"#fff",stroke:"#000",strokeThickness:1});this.time.delayedCall(1e3,(function(){a.destroy()}),[],this)}collectCoin(e,t){t.disableBody(!0,!0),m+=1,this.scorePoints(10,t.x,t.y),x.play(N)}collectMiniCoin(e,t){t.disableBody(!0,!0);let i=this.add.text(t.x,t.y-10,"MULTI + 1",{fontFamily:"pxlFont",fontSize:"12px",fill:"#A7DBD8",stroke:"#000",strokeThickness:1});this.scorePoints(5,t.x,t.y+15),H+=1,this.time.delayedCall(1e3,(function(){i.destroy()}),[],this),this.addTimer(),x.play(N)}powerUpPlayer(e,t){t.disableBody(!0,!0),g.play(N),1==L?(console.log("power up collected, power level: "+L),f=new he({scene:this,x:e.x-15,y:e.y+15}),L+=1,this.scorePoints(100,e.x,e.y+10)):2==L&&(console.log("power up collected, power level: "+L),S=new he({scene:this,x:e.x+15,y:e.y+15}),L+=1,this.scorePoints(1e3,e.x,e.y+5),K&&(v=new de({scene:this,x:S.x,y:S.y-10}),this.beams.add(v),v.setOrigin(0,1),v.play("greenAnim")))}explode(e,t,i){for(let s=0;s<i;s++)this.time.delayedCall(200*s,(function(){this.add.sprite(Phaser.Math.Between(e-10,e+10),Phaser.Math.Between(t-10,t+10),"expl1").play("explosion"),B.play(N)}),[],this)}getBombed(e,t){e.Health=e.Health-100,this.damageEnemy(e,t)}damageEnemy(e,t){if(this.cameras.main.worldView.contains(e.x,e.y)&&1==e.canHit&&(e.canHit=!1,e.setTintFill(268435455),e.Health=e.Health-(10+L+3*L),console.log("enemy hit, health:"+e.Health),this.time.delayedCall(10,(function(){e.clearTint()}),[],this),this.time.delayedCall(100,(function(){e.canHit=!0}),[],this),e.Health<=0))if(e.isBoss){if(e.isBoss){console.log("boss destroyed"),I=!1,u+=1;for(let t=0;t<12;t++)this.time.delayedCall(200*t,(function(){B.play(N),this.add.sprite(Phaser.Math.Between(e.x-50,e.x+50),Phaser.Math.Between(e.y+60,e.y-60),"expl1").play("explosion")}),[],this),this.spawnCoin(Phaser.Math.Between(e.x-100,e.x+100),Phaser.Math.Between(e.y+200,e.y-50));e.destroy(),this.time.delayedCall(6e3,this.passStage,[],this)}}else{u+=1,this.scorePoints(50,e.x,e.y+5),this.explode(e.x,e.y,2);let t=Phaser.Math.Between(0,10);5==t?this.spawnPowerUp(e.x,e.y):t>5?this.spawnCoin(e.x,e.y):t<5&&this.spawnMiniCoin(e.x,e.y),e.setActive(!1),e.setVisible(!1),e.destroy()}}killRedBullet(e,t){console.log("red bullet hit"),e.disableBody(!0,!0),t.setActive(!1),t.setVisible(!1),this.scorePoints(1,e.x,e.y)}respawnPlayer(){sdk.showBanner(),i.setActive(!0),i.setVisible(!0),i.setAlpha(.5),z=!1,this.time.delayedCall(2500,(function(){i.body.enable=!0,z=!0,i.setAlpha(1)}),[],this),X=!0,T=3}continueGame(){w.play(N),this.physics.world.timeScale=1,this.respawnPlayer(),G=3,D=0,T=3,this.addLives(),this.addBombs(),U=!1,h.setActive(!1),h.setVisible(!1),o.setActive(!1),o.setVisible(!1),A.setVisible(!1),s.setActive(!0),s.setVisible(!0)}toTitle(){this.scene.stop("PlayGame"),this.scene.start("BootGame")}addLives(){l=this.add.group({key:"playerIcon",repeat:1,setXY:{x:16,y:616,stepX:32}})}addBombs(){c=this.add.group({key:"bombIcon",repeat:2,setXY:{x:390,y:616,stepX:32}})}playerHit(e,t){z&&(console.log("Player hit"),O=!1,this.damageEnemy(t,this.laserGroup),X=!1,z=!1,this.explode(e.x,e.y,4),e.setVisible(!1),e.setActive(!1),e.body.enable=!1,G-=1,l.remove(l.getLast(!0),!0),0===G?this.initiateGameOver():this.time.delayedCall(2e3,this.respawnPlayer,[],this))}addTimer(){R=!0,this.time.addEvent({delay:3e4,callback:function(){R=!1},loop:!1})}startBossBattle(){let e=this.add.sprite(0,0,"warning");e.setOrigin(0,0),e.setAlpha(0),b.play({mute:!1,volume:.5,loop:!0,delay:0});this.tweens.add({targets:e,alphaTopLeft:{value:1,duration:500,ease:"Power1"},alphaBottomRight:{value:1,duration:500,ease:"Power1"},alphaBottomLeft:{value:1,duration:500,ease:"Power1"},yoyo:!0,loop:-1});this.tweens.add({targets:this.stageMusic,volume:0,duration:2e3}),this.time.delayedCall(4e3,(function(){e.destroy(),b.stop(),this.bossMusic.play(Y),this.addBoss(240,10)}),[],this)}create(){this.cameras.main.fadeIn(1e3,0,0,0),(d=this.add.tileSprite(0,0,this.scale.width,this.scale.height,"titleBackground")).setOrigin(0,0),this.bossMusic=this.sound.add("bossBattleSong"),this.anims.create({key:"animPlayer",frames:this.anims.generateFrameNumbers("animatedPlayer",{start:0,end:3}),frameRate:10,repeat:-1}),(i=this.physics.add.sprite(240,400,"mech")).play("animPlayer"),i.setBounce(1),i.setGravity(0),i.setCollideWorldBounds(!0),i.setSize(1,1),i.setOffset(23,23),2==L?f=new he({scene:this,x:i.x-15,y:i.y+15}):3==L&&(f=new he({scene:this,x:i.x-15,y:i.y+15}),S=new he({scene:this,x:i.x+15,y:i.y+15})),y=this.input.keyboard.createCursorKeys();this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);this.laserGroup=new ae(this),this.beams=new oe(this),O=!0,u=0,m=0,(E=this.add.text(5,5,"000000000",{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:3})).setScrollFactor(0),(C=this.add.text(5,25,"x001",{fontFamily:"pxlFont",fontSize:"32px",fill:"#A7DBD8",stroke:"#000",strokeThickness:3})).setScrollFactor(0),this.addBombs(),V=new te(this),k=new $(this),this.addLives(),this.coins=new le(this),this.spawnCoin(12,450),this.powerUps=new me(this),this.miniCoins=new ce(this),this.anims.create({key:"bossTwoA",frames:this.anims.generateFrameNumbers("bossTwoAnim",{start:0,end:4}),frameRate:5,repeat:-1}),this.nmeGroup=new _(this),this.addAsteroid(200,200,"asteroid-04",87,8),this.addAsteroid(100,123,"asteroid-01",87,3),this.addAsteroid(341,300,"asteroid-02",43,0),this.time.delayedCall(6e3,(function(){this.startBossBattle()}),[],this),this.physics.add.overlap(this.nmeGroup,this.laserGroup,this.damageEnemy,null,this),this.physics.add.collider(i,this.nmeGroup,this.playerHit,null,this),this.physics.add.collider(i,V,this.playerHit,null,this),this.physics.add.collider(i,k,this.playerHit,null,this),this.physics.add.overlap(k,this.laserGroup,this.killRedBullet,null,this),this.physics.add.overlap(this.nmeGroup,this.beams,this.damageEnemy,null,this),this.anims.create({key:"explosion",frames:[{key:"expl1"},{key:"expl2"},{key:"expl3"},{key:"expl4"},{key:"expl5"},{key:"expl6"},{key:"expl7"},{key:"expl8"},{key:"expl9"},{key:"expl10"},{key:"expl11",duration:90}],frameRate:15,repeat:0}),this.anims.create({key:"coinSh",frames:this.anims.generateFrameNumbers("animatedCoin",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"miniCoin",frames:this.anims.generateFrameNumbers("miniCoin",{start:0,end:5}),frameRate:20,repeat:-1}),this.anims.create({key:"greenAnim",frames:this.anims.generateFrameNumbers("animatedBeam",{start:0,end:2}),frameRate:20,repeat:-1}),this.anims.create({key:"shinyP",frames:this.anims.generateFrameNumbers("animPC",{start:0,end:3}),frameRate:20,repeat:-1}),this.anims.create({key:"grnVoid",frames:this.anims.generateFrameNumbers("greenVoid",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"lrgBlueAn",frames:this.anims.generateFrameNumbers("largeBlueAnim",{start:0,end:3}),frameRate:20,repeat:-1}),this.physics.add.overlap(i,this.coins,this.collectCoin,null,this),this.physics.add.overlap(i,this.miniCoins,this.collectMiniCoin,null,this),this.physics.add.overlap(i,this.powerUps,this.powerUpPlayer,null,this),this.input.keyboard.on("keydown-X",this.shootLaser,this);this.input.activePointer;this.input.on("pointerdown",(e=>{this.shootLaser()})),(A=this.add.sprite(0,0,"gameOverScreen")).setDepth(1),A.setOrigin(0,0),A.setActive(!1),A.setVisible(!1),(h=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"continueButton")).setDepth(1),h.setInteractive(),h.on("pointerdown",(()=>{this.continueGame()})),h.setActive(!1),h.setVisible(!1),(o=this.add.sprite(.5*this.scale.width,.7*this.scale.height,"titleButton")).setInteractive(),o.on("pointerdown",(()=>{this.toTitle()})),o.setActive(!1),o.setVisible(!1),(s=this.add.sprite(440,30,"pauseButton")).setDepth(1),s.setInteractive(),s.on("pointerdown",(()=>{this.pauseGame()})),(a=this.add.sprite(0,0,"pauseText")).setDepth(1),a.setOrigin(0,0),a.setActive(!1),a.setVisible(!1),this.spawnPowerUp(400,300),p=this.sound.add("shootingSound"),g=this.sound.add("laserPickupSound"),x=this.sound.add("coinPickupSound"),B=this.sound.add("explosionSound"),w=this.sound.add("pauseSound"),b=this.sound.add("bossAlert")}handlePointer(){this.input.on("pointermove",(e=>{i.setPosition(e.x,e.y)}))}initiateGameOver(){G=-1,D=0,U=!0;for(let e=0;e<3;e++)this.spawnCoin(i.x,i.y),this.spawnPowerUp(i.x,i.y);this.physics.world.timeScale=8,console.log("game over, idiot"),A.setActive(!0),A.setVisible(!0),h.setActive(!0),h.setVisible(!0),s.setActive(!1),s.setVisible(!1)}shootLaser(){if(X){var e=Math.floor(7*Math.random()-3);this.laserGroup.fireLaser(i.x+e,i.y-35),p.play(N)}}moveEnemy(e,t,i){if(this.cameras.main.worldView.contains(e.x,e.y)){this.tweens.add({targets:e,x:t,y:i,duration:4e3,ease:"Back",easeParams:[1.5],delay:0});e.inPos=!0}}addBugEnemy(e,t,i,s,a,n,h,o,d,l){var r=new Q({scene:this,x:e,y:t,type:i,health:s,weapon:a,fdelay:o,destX:n,destY:h,stringDir:d,strLength:l}).setScrollFactor(0,0);this.nmeGroup.add(r),r.setVelocity(0,87)}addMiniBug(e,t,i,s){var a=new J({scene:this,x:e,y:t,key:"miniBug",speed:i,ofstX:s});this.nmeGroup.add(a),a.setVelocity(0,87)}addAsteroid(e,t,i,s,a){var n=new J({scene:this,x:e,y:t,key:i,speed:s,ofstX:a});this.nmeGroup.add(n),n.setVelocity(a,s)}addBoss(e,t){M=new j({scene:this,x:e,y:t,key:"bossThree"}),this.moveEnemy(M,240,180),I=!0,this.nmeGroup.add(M),this.bossHealthDisplay=this.add.text(10,100,"boss health: "+M.Health,{fontSize:"16px"});for(let e=0;e<1e3;e++)e<10?(this.time.delayedCall(2e3*e,(function(){this.addBugEnemy(M.x,M.y+113,"biomech",300,"boss1patt2",Phaser.Math.Between(M.x+200,M.x-200),M.y-50,1e3)}),[],this),this.time.delayedCall(1e3*e,(function(){M.Health>0&&(this.arrowString(5,0,M.x-113,M.y+92),this.arrowString(5,0,M.x+113,M.y+92))}),[],this)):e>10&&e<30?this.time.delayedCall(1e3*e+200*e,(function(){M.Health>0&&(this.directionalShotBlue(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),16,50),this.directionalShotBlue(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),7,50),this.directionalShotBlue(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),-18,50),this.directionalShotRed(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),4,50),this.directionalShotBlue(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),2,50),this.directionalShotBlue(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),13,50),this.directionalShotRed(M.x-113,Phaser.Math.Between(M.y+87,M.y+97),-25,50),this.directionalShotRed(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),5,50),this.directionalShotBlue(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),-18,50),this.directionalShotRed(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),-6,50),this.directionalShotBlue(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),-13,50),this.directionalShotRed(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),24,50),this.directionalShotBlue(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),-29,50),this.directionalShotBlue(M.x+113,Phaser.Math.Between(M.y+87,M.y+97),-7,50),this.addMiniBug(Phaser.Math.Between(M.x-10,M.x+10),M.y+113,300,Phaser.Math.Between(-50,50)),this.aimedShot(M.x,M.y))}),[],this):e>30&&e<40?this.time.delayedCall(1e3*e,(function(){M.Health>0&&(this.arrowString(3,2*e,M.x-113,M.y+92),this.arrowString(3,-2*e,M.x+113,M.y+92),this.octoShot(Phaser.Math.Between(M.x-20,M.x+20),M.y+113))}),[],this):e>40&&e<100?this.time.delayedCall(1e3*e,(function(){M.Health>0&&(this.addBugEnemy(M.x,M.y+113,"baxter",300,"blue",Phaser.Math.Between(M.x+200,M.x-200),M.y-50,500),this.bulletString(8,Phaser.Math.Between(-40,40),M.x-113,M.y+92),this.bulletString(8,Phaser.Math.Between(-40,40),M.x+113,M.y+92))}),[],this):e>100&&this.time.delayedCall(1e3*e,(function(){M.Health>0&&(this.addBugEnemy(M.x,M.y+113,"fish",300,"largeBlue",Phaser.Math.Between(M.x+200,M.x-200),M.y-50,2e3),this.aimedShot(M.x+113,M.y+92),this.aimedShotRed(M.x-113,M.y+92))}),[],this)}blueShot(e,t){if(this.cameras.main.worldView.contains(e,t)){console.log("blue bullet fired");var i=new ie({scene:this,x:e,y:t});V.add(i),i.setVelocity(0,100)}}redShot(e,t){if(this.cameras.main.worldView.contains(e,t)){console.log("red bullet fired");var i=new ee({scene:this,x:e,y:t});k.add(i),i.setVelocity(0,100)}}aimedShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var s=new Phaser.Math.Vector2(i.x,i.y),a=new ie({scene:this,x:e,y:t});V.add(a),this.physics.moveToObject(a,s,100)}}aimedShotRed(e,t){if(this.cameras.main.worldView.contains(e,t)){var s=new Phaser.Math.Vector2(i.x,i.y),a=new ee({scene:this,x:e,y:t});k.add(a),this.physics.moveToObject(a,s,100)}}directionalShotBlue(e,t,i,s){if(this.cameras.main.worldView.contains(e,t)){null==s&&(this.dirY=100);var a=new ie({scene:this,x:e,y:t});V.add(a),a.setVelocity(i,s)}}directionalShotRed(e,t,i,s){if(this.cameras.main.worldView.contains(e,t)){null==s&&(this.dirY=100);var a=new ee({scene:this,x:e,y:t});k.add(a),a.setVelocity(i,s)}}bulletString(e,t,i,s){if(this.cameras.main.worldView.contains(i,s))for(var a=0;a<e;a++){var n=new ie({scene:this,x:i+a*(t/10),y:s+10*a});V.add(n),n.setVelocity(t,100)}}arrowString(e,t,i,s){if(this.cameras.main.worldView.contains(i,s))for(var a=0;a<e;a++){var n=new se({scene:this,x:i,y:s,key:"greenArrow"});V.add(n),n.setVelocity(t,100)}}quadShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ie({scene:this,x:e,y:t+5});V.add(i),i.setVelocity(0,100);var s=new ie({scene:this,x:e+5,y:t});V.add(s),s.setVelocity(100,0);var a=new ie({scene:this,x:e-5,y:t});V.add(a),a.setVelocity(-100,0);var n=new ie({scene:this,x:e,y:t-5});V.add(n),n.setVelocity(0,-100)}}quadShot2(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ie({scene:this,x:e+5,y:t+5});V.add(i),i.setVelocity(50,100);var s=new ie({scene:this,x:e+5,y:t-5});V.add(s),s.setVelocity(50,-100);var a=new ie({scene:this,x:e-5,y:t-5});V.add(a),a.setVelocity(-50,100);var n=new ie({scene:this,x:e-5,y:t+5});V.add(n),n.setVelocity(-50,-100)}}octoShot(e,t){if(this.cameras.main.worldView.contains(e,t)){this.quadShot(e,t);var i=new ie({scene:this,x:e+5,y:t+5});V.add(i),i.setVelocity(50,100);var s=new ie({scene:this,x:e+5,y:t-5});V.add(s),s.setVelocity(50,-100);var a=new ie({scene:this,x:e-5,y:t-5});V.add(a),a.setVelocity(-50,100);var n=new ie({scene:this,x:e-5,y:t+5});V.add(n),n.setVelocity(-50,-100)}}tripleShot(e,t){if(this.cameras.main.worldView.contains(e,t)){var i=new ee({scene:this,x:e,y:t});k.add(i),i.setVelocity(0,100);var s=new ie({scene:this,x:e+5,y:t});V.add(s),s.setVelocity(15,100);var a=new ie({scene:this,x:e-5,y:t});V.add(a),a.setVelocity(-15,100)}}spinShot(){}clusterA(e,t){this.directionalShotBlue(this.x,this.y,12),this.directionalShotBlue(this.x,this.y,18),this.directionalShotBlue(this.x,this.y,15),this.directionalShotBlue(this.x,this.y,5),this.directionalShotBlue(this.x,this.y,0),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,-1)}clusterB(e,t){this.directionalShotBlue(this.x,this.y,0),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,-15),this.directionalShotBlue(this.x,this.y,-2),this.directionalShotBlue(this.x,this.y,20),this.directionalShotBlue(this.x,this.y,19),this.directionalShotBlue(this.x,this.y,-13)}largeBlueShot(e,t,i){if(this.cameras.main.worldView.contains(e,t)){var s=new se({scene:this,x:e,y:t,key:"largeBlue"});V.add(s),s.play("lrgBlueAn"),s.setSize(16,16),s.setVelocity(0,-55),s.setGravity(Phaser.Math.Between(-5,5),55)}}spawnCoin(e,t){var i=Math.floor(21*Math.random()-10),s=Math.floor(21*Math.random()-10),a=new re({scene:this,x:e+i,y:t+s});this.coins.add(a),a.setGravity(0,10),a.setBounce(10),a.setVelocity(i,-2*s),a.play("coinSh")}spawnMiniCoin(e,t){var i=new ye({scene:this,x:e,y:t});this.miniCoins.add(i),i.setGravity(0,140),i.setBounce(10),i.setVelocity(0,-140),i.play("miniCoin")}spawnPowerUp(e,t){var i=new ue({scene:this,x:e,y:t});this.powerUps.add(i),i.setGravity(0,90),i.setBounce(10),i.setVelocity(0,-140),i.play("shinyP")}activateBomb(){T>0&&X?(T-=1,this.bombing=!0,console.log("Bomb activated"),(r=this.physics.add.sprite(0,0,"bombtest").setOrigin(0,0)).body.enable=!0,r.setActive(!0),r.setVisible(!0),this.cameras.main.shake(300),c.remove(c.getLast(!0),!0),this.time.delayedCall(50,(function(){r.destroy(),this.bombing=!1}),[],this)):console.log("no more bombs available")}fireGreen(){X&&(K?(P.setPosition(f.x-4,f.y-21),P.setActive(!0,!0),3==L&&(v.setPosition(S.x-4,S.y-21),v.setActive(!0,!0))):(2==L&&(K=!0,P=new de({scene:this,x:f.x,y:f.y-10}),this.beams.add(P),P.setOrigin(0,1),P.play("greenAnim")),3==L&&(K=!0,P=new de({scene:this,x:f.x,y:f.y-10}),this.beams.add(P),P.setOrigin(0,1),P.play("greenAnim"),v=new de({scene:this,x:S.x,y:S.y-10}),this.beams.add(v),v.setOrigin(0,1),v.play("greenAnim"))),console.log("lazer firing"))}addLeadingZeros(e,t){return String(e).padStart(t,"0")}update(){var e=this.input.activePointer;if(e.isDown)!0===X&&(this.handlePointer(),this.shootLaser(),this.fireGreen()),L>=2&&f.setPosition(i.x-35,i.y-5);else{var t=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Z),s=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.C),a=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);t.isDown&&(this.shootLaser(),this.fireGreen()),Phaser.Input.Keyboard.JustDown(s)&&this.activateBomb(),Phaser.Input.Keyboard.JustDown(a)&&this.pauseGame(),y.left.isDown?i.setVelocityX(-200):y.right.isDown?i.setVelocityX(q):i.setVelocityX(0),y.up.isDown?i.setVelocityY(-200):y.down.isDown?i.setVelocityY(q):i.setVelocityY(0)}L>=2&&f.setPosition(i.x-35,i.y-5),3==L&&S.setPosition(i.x+35,i.y-5),e.isDown||t.isDown||1==K&&(P.disableBody(!0,!0),L>=3&&v.disableBody(!0,!0),K=!1),I?this.bossHealthDisplay.setText("boss health: "+M.Health):d.tilePositionY-=2,E.setText(this.addLeadingZeros(D,9)),C.setText("x"+this.addLeadingZeros(H,3)),H>1&&!R&&(H-=1),D>=F&&(F=D)}}class Be extends Phaser.Scene{constructor(){super("BootGame")}preload(){const e=.5*this.scale.width,t=.5*this.scale.height;var i=this.add.graphics(),s=this.add.graphics();i.moveTo(e,t),s.moveTo(e,t),s.fillStyle(2236962,.8),s.fillRect(.3*e,t,320,50),this.load.on("progress",(function(s){console.log(s),i.clear(),i.fillStyle(6935271,1),i.fillRect(.3*e+10,t+10,300*s,30)})),this.load.on("fileprogress",(function(e){console.log(e.src)})),this.load.on("complete",(function(){console.log("complete"),i.destroy(),s.destroy()})),this.load.image("background","images/background.jpg"),this.load.image("stageOneBG","images/brStage1.png"),this.load.image("stageTwoBG","images/brStage2.png"),this.load.image("blastBeatLogo","images/blastbeatlogo.png"),this.load.image("mech","Player.png"),this.load.spritesheet("animatedPlayer","animations/animatedPlayer.png",{frameWidth:48,frameHeight:48}),this.load.image("coin","coin.png"),this.load.image("mCoin","miniCoin1.png"),this.load.image("laser","bullet.png"),this.load.image("tomato","images/tomato.png"),this.load.image("baxter","images/baxter.png"),this.load.image("fish","images/dikbug.png"),this.load.image("dikbug2","images/dikbugLrg.png"),this.load.image("purpleB","images/purpleBaxter.png"),this.load.image("miniBug","images/mini_1.png"),this.load.image("grnVoid1","images/greenVoid.png"),this.load.spritesheet("greenVoid","animations/animatedVoid.png",{frameWidth:32,frameHeight:55}),this.load.image("Dbomber","images/Dbomber.png"),this.load.image("Mwing","images/Mwing.png"),this.load.image("Vwing","images/Vwing.png"),this.load.image("Xwing","images/Xwing.png"),this.load.image("biomech","images/biomech1.png"),this.load.image("blueBullet","images/blueBullet.png"),this.load.image("redBullet","images/redBullet.png"),this.load.image("largeBlue","images/largeBlue.png"),this.load.spritesheet("largeBlueAnim","animations/lrgbBlueAnim.png",{frameWidth:32,frameHeight:32}),this.load.image("greenArrow","images/greenArrow.png"),this.load.image("asteroid-01","images/asteroid-01.png"),this.load.image("asteroid-02","images/asteroid-02.png"),this.load.image("asteroid-03","images/asteroid-03.png"),this.load.image("asteroid-04","images/asteroid-04.png"),this.load.image("asteroid-05","images/asteroid-05.png"),this.load.image("lzrCannon","images/lazerCannon1.png"),this.load.image("lazerBeam","images/stillBeam.png"),this.load.spritesheet("animatedBeam","animations/animatedLazer.png",{frameWidth:8,frameHeight:630}),this.load.image("bossOne","images/bawss1.png"),this.load.image("bossTwo","images/bawss2.png"),this.load.image("bossThree","images/bawss3.png"),this.load.spritesheet("bossOneAnim","animations/bossOneAnim.png",{frameWidth:96,frameHeight:118}),this.load.spritesheet("bossTwoAnim","animations/bossTwoAnim.png",{frameWidth:240,frameHeight:240}),this.load.image("playerIcon","life_v1.png"),this.load.image("bombIcon","bomb_v3.png"),this.load.image("pauseButton","images/pause.png"),this.load.image("pauseText","images/pauseScreen.png"),this.load.image("playButton","images/playButton.png"),this.load.image("pCoin","images/pCoin.png"),this.load.spritesheet("animPC","animations/shiningPcoin.png",{frameWidth:32,frameHeight:32}),this.load.image("expl1","animations/Explosion/explosion-01.png"),this.load.image("expl2","animations/Explosion/explosion-02.png"),this.load.image("expl3","animations/Explosion/explosion-03.png"),this.load.image("expl4","animations/Explosion/explosion-04.png"),this.load.image("expl5","animations/Explosion/explosion-05.png"),this.load.image("expl6","animations/Explosion/explosion-06.png"),this.load.image("expl7","animations/Explosion/explosion-07.png"),this.load.image("expl8","animations/Explosion/explosion-08.png"),this.load.image("expl9","animations/Explosion/explosion-09.png"),this.load.image("expl10","animations/Explosion/explosion-10.png"),this.load.image("expl11","animations/Explosion/explosion-11.png"),this.load.image("bombtest","images/bombtest.png"),this.load.spritesheet("animatedCoin","animations/animatedcoin.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("miniCoin","animations/minicoin.png",{frameWidth:16,frameHeight:16}),this.load.image("logoMain","images/gameSizeLogo.png"),this.load.image("titleBackground","images/titleBackground.png"),this.load.image("gameOverScreen","images/gameoverScreen.png"),this.load.image("continueButton","images/continueButton.png"),this.load.image("titleButton","images/titleButton.png"),this.load.image("stageComplete","images/stagecomplete.png"),this.load.image("warning","images/warning.png"),this.load.audio("shootingSound","sounds/scifi2_power_gun_single_07.ogg"),this.load.audio("laserPickupSound","sounds/scifi2_foley_pickup_03.ogg"),this.load.audio("coinPickupSound","sounds/Coin.ogg"),this.load.audio("explosionSound","sounds/Explossion.ogg"),this.load.audio("pauseSound","sounds/Menu_Click_3.ogg"),this.load.audio("bossAlert","sounds/Alert.ogg"),this.load.audio("stageOneSong","sounds/shooting_01_loop.ogg"),this.load.audio("stageTwoSong","sounds/shooting_03_loop.ogg"),this.load.audio("bossBattleSong","sounds/boss_battle_01_loop.ogg")}create(){console.log("game is booting..."),this.scene.start("TitleScreen")}update(){}}class we extends Phaser.Scene{constructor(){super("TitleScreen")}preload(){}create(){const e=.5*this.scale.width,t=.5*this.scale.height;if(this.background=this.add.tileSprite(0,0,this.scale.width,this.scale.height,"titleBackground"),this.background.setOrigin(0,0),this.add.sprite(0,0,"logoMain").setOrigin(0,0),0==F)this.add.text(.25*e,t,"[TAP] , [CLICK] or [Press ENTER]",{fontSize:"16px",color:"#FF75D4E4",stroke:"#000",strokeThickness:"3",fixedWidth:480,align:"center"});else{this.add.text(.25*e,t,"Thank you for playing.",{fontSize:"16px",color:"#FF75D4E4",stroke:"#000",strokeThickness:"3",fixedWidth:480,align:"center"});this.add.text(.25*this.scale.width,.75*this.scale.height,"High: "+String(F).padStart(9,"0"),{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:3,align:"center"})}x=this.sound.add("coinPickupSound"),console.log("click, tap or press enter to start"),this.input.keyboard.once("keydown-ENTER",(()=>{x.play(),0==F&&this.cameras.main.fadeOut(1e3,0,0,0)})),this.input.once("pointerdown",(()=>{x.play(),0==F&&this.cameras.main.fadeOut(1e3,0,0,0)})),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((e,t)=>{this.startGame()})),sdk.showBanner()}startGame(){this.time.delayedCall(1e3,(()=>{this.scene.start("PlayGame")}))}update(){this.background.tilePositionY-=.5}}class be extends Phaser.Scene{constructor(){super("PauseButton")}create(){(n=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"playButton")).setDepth(1),n.setInteractive(),n.on("pointerdown",(()=>{this.resumeGame()})),w=this.sound.add("pauseSound"),this.highScoreText=this.add.text(.25*this.scale.width,.75*this.scale.height,"High: "+String(F).padStart(9,"0"),{fontFamily:"pxlFont",fontSize:"32px",fill:"#fff",stroke:"#000",strokeThickness:3,align:"center"})}resumeGame(){console.log("game started"),w.play(N),this.highScoreText.destroy(),a.setActive(!1),a.setVisible(!1),n.setActive(!1),n.setVisible(!1),s.setActive(!0),s.setVisible(!0),this.scene.isPaused("PlayGame")?this.scene.resume("PlayGame"):this.scene.isPaused("PlayGame2")?this.scene.resume("PlayGame2"):this.scene.isPaused("PlayGame3")&&this.scene.resume("PlayGame3"),console.log("Game unpaused.")}update(){this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER).isDown&&this.resumeGame()}}class fe extends Phaser.Scene{constructor(){super("GameOver1")}create(){}}